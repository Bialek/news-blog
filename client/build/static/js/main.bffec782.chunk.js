(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{116:function(e,t,c){},118:function(e,t,c){},119:function(e,t,c){},217:function(e,t,c){},218:function(e,t,c){},219:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(1),s=c.n(a),i=c(62),r=c.n(i),l=c(18),o=c(2),j=c(9),u=c(5),d=c.p+"static/media/logo.1561cb7e.png",b=Object(a.createContext)(null),h="ROLE_ADMIN",m="",O="token";function x(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),c=t[0],s=t[1],i=Object(a.useContext)(b),r=i.storeData,u=i.setStoreData;return Object(n.jsx)("nav",{className:"navbar is-info",role:"navigation","aria-label":"main navigation",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("div",{className:"navbar-brand",children:[Object(n.jsx)(j.c,{className:"navbar-item",to:"/",exact:!0,children:Object(n.jsx)("img",{src:d,width:"112",height:"28",alt:"logo"})}),Object(n.jsxs)("span",{onClick:function(){return s(!c)},role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false",children:[Object(n.jsx)("span",{"aria-hidden":"true"}),Object(n.jsx)("span",{"aria-hidden":"true"}),Object(n.jsx)("span",{"aria-hidden":"true"})]})]}),Object(n.jsxs)("div",{className:"navbar-menu  ".concat(c&&"is-active"),children:[Object(n.jsxs)("div",{className:"navbar-start",children:[Object(n.jsx)(j.c,{className:"navbar-item",activeClassName:"is-active",to:"/",exact:!0,children:"Home"}),Object(n.jsx)(j.c,{className:"navbar-item",activeClassName:"is-active",to:"/news-list",children:"News"}),r.userData&&r.userData.roles.includes(h)&&Object(n.jsx)(j.c,{className:"navbar-item",activeClassName:"is-active",to:"/admin/dashboard",children:"Admin"})]}),Object(n.jsx)("div",{className:"navbar-end",children:Object(n.jsx)("div",{className:"navbar-item",children:Object(n.jsx)("div",{className:"buttons",children:r.userData?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"media-content mr-3",children:Object(n.jsx)("p",{className:"title is-4 has-text-white",children:"".concat(r.userData.username)})}),Object(n.jsx)("div",{onClick:function(){localStorage.removeItem(O),u((function(e){return Object(l.a)(Object(l.a)({},e),{},{userData:void 0})}))},children:Object(n.jsx)(j.c,{className:"button is-primary",to:"/",children:Object(n.jsx)("strong",{children:"Sing out"})})})]}):Object(n.jsx)(j.c,{className:"button is-light",to:"/log-in",children:"Log in"})})})})]})]})})}function f(){var e=Object(a.useContext)(b).storeData;return Object(n.jsxs)("section",{className:"hero is-info is-fullheight-with-navbar",children:[Object(n.jsx)("div",{className:"hero-body",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{className:"title",children:"Hello on News Blog"}),Object(n.jsx)("h2",{className:"subtitle",children:"Web app blog with admin"})]})}),Object(n.jsx)("div",{className:"hero-foot",children:Object(n.jsx)("nav",{className:"tabs is-boxed is-fullwidth",children:Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("ul",{children:e&&e.dictionaryData&&e.dictionaryData.news_category&&e.dictionaryData.news_category.map((function(e){return Object(n.jsx)("li",{children:Object(n.jsx)(j.b,{to:"/news-list/".concat(e.id),children:e.name})})}))})})})})]})}function p(){return Object(n.jsx)("section",{className:"hero is-danger is-fullheight-with-navbar",children:Object(n.jsx)("div",{className:"hero-body",children:Object(n.jsx)("h1",{className:"title",children:"Admin dashboard"})})})}c(116);function v(e){return Object(n.jsxs)("div",{className:"columns",children:[Object(n.jsx)("div",{className:"column is-2",children:Object(n.jsxs)("aside",{className:"menu mt-3 ml-3",children:[Object(n.jsx)("p",{className:"menu-label",children:"Administration"}),Object(n.jsxs)("ul",{className:"menu-list",children:[Object(n.jsx)("li",{children:Object(n.jsx)(j.c,{activeClassName:"is-active",to:"/admin/dashboard",exact:!0,children:"Dashboard"})}),Object(n.jsx)("li",{children:Object(n.jsx)(j.c,{activeClassName:"is-active",to:"/admin/news-list",exact:!0,children:"News"})})]})]})}),Object(n.jsx)("div",{className:"column",children:e.children})]})}var N=c(7),g=c.n(N),w=c(10),y=c(24),k=c(25),S=new(function(){function e(){Object(y.a)(this,e)}return Object(k.a)(e,[{key:"logIn",value:function(e){return new Promise((function(t,c){fetch("".concat(m,"/api/auth/signIn"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(){var e=Object(w.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==n.status){e.next=8;break}return e.t0=t,e.next=4,n.json();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=13;break;case 8:return e.t2=c,e.next=11,n.json();case 11:e.t3=e.sent,(0,e.t2)(e.t3);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){c(e)}))}))}}]),e}());function C(){var e=Object(a.useState)(void 0),t=Object(o.a)(e,2),c=t[0],s=t[1],i=Object(u.f)(),r=Object(a.useContext)(b).setStoreData;return Object(n.jsxs)("section",{className:"section",children:[Object(n.jsxs)("div",{className:"container mt-3",children:[Object(n.jsx)("h1",{className:"title",children:"Log in page"}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s(void 0);var t={username:e.target.login.value,password:e.target.password.value};S.logIn(t).then((function(e){localStorage.setItem(O,e.accessToken),r((function(t){return Object(l.a)(Object(l.a)({},t),{},{userData:e})})),i.push("/")})).catch((function(e){s({type:"danger",text:"Error! ".concat(e.message)})}))},children:[Object(n.jsx)("div",{className:"field",children:Object(n.jsxs)("p",{className:"control has-icons-left has-icons-right",children:[Object(n.jsx)("input",{className:"input",name:"login",type:"text",placeholder:"Login"}),Object(n.jsx)("span",{className:"icon is-small is-left",children:Object(n.jsx)("i",{className:"fas fa-envelope"})})]})}),Object(n.jsx)("div",{className:"field",children:Object(n.jsxs)("p",{className:"control has-icons-left",children:[Object(n.jsx)("input",{className:"input",name:"password",type:"password",placeholder:"Password"}),Object(n.jsx)("span",{className:"icon is-small is-left",children:Object(n.jsx)("i",{className:"fas fa-lock"})})]})}),Object(n.jsx)("div",{className:"field",children:Object(n.jsx)("p",{className:"control",children:Object(n.jsx)("button",{className:"button is-success",children:"Login"})})})]})]}),c&&Object(n.jsx)("article",{className:"message is-".concat(c.type," mt-6"),children:Object(n.jsx)("div",{className:"message-body",children:c.text})})]})}var I=new(function(){function e(){Object(y.a)(this,e)}return Object(k.a)(e,[{key:"getAll",value:function(){return new Promise((function(e,t){fetch("".concat(m,"/api/news/getAll"),{headers:{"x-access-token":localStorage.getItem(O)}}).then(function(){var c=Object(w.a)(g.a.mark((function c(n){return g.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(200===n.status){c.next=4;break}t(n),c.next=9;break;case 4:return c.t0=e,c.next=7,n.json();case 7:c.t1=c.sent,(0,c.t0)(c.t1);case 9:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()).catch((function(e){t(e)}))}))}},{key:"getById",value:function(e){return new Promise((function(t,c){fetch("".concat(m,"/api/news/getById/").concat(e),{headers:{"x-access-token":localStorage.getItem(O)}}).then(function(){var e=Object(w.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===n.status){e.next=4;break}c(n),e.next=9;break;case 4:return e.t0=t,e.next=7,n.json();case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){c(e)}))}))}},{key:"getByIdForEdit",value:function(e){return new Promise((function(t,c){fetch("".concat(m,"/api/news/getByIdForEdit/").concat(e),{headers:{"x-access-token":localStorage.getItem(O)}}).then(function(){var e=Object(w.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===n.status){e.next=4;break}c(n),e.next=9;break;case 4:return e.t0=t,e.next=7,n.json();case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){c(e)}))}))}},{key:"create",value:function(e){return new Promise((function(t,c){fetch("".concat(m,"/api/news/create"),{method:"post",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem(O)},body:JSON.stringify(e)}).then((function(e){200===e.status?t():c(e.message)})).catch((function(e){c(e.message)}))}))}},{key:"update",value:function(e){return new Promise((function(t,c){fetch("".concat(m,"/api/news/edit"),{method:"put",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem(O)},body:JSON.stringify(e)}).then((function(e){200===e.status?t():c(e.message)})).catch((function(e){c(e.message)}))}))}},{key:"delete",value:function(e){return new Promise((function(t,c){fetch("".concat(m,"/api/news/delete/").concat(e),{method:"delete",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem(O)}}).then(function(){var e=Object(w.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===n.status){e.next=4;break}c(n),e.next=9;break;case 4:return e.t0=t,e.next=7,n.json();case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){c(e)}))}))}},{key:"publish",value:function(e){return new Promise((function(t,c){fetch("".concat(m,"/api/news/publish/").concat(e),{method:"put",headers:{"x-access-token":localStorage.getItem(O)}}).then(function(){var e=Object(w.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===n.status){e.next=4;break}c(n),e.next=9;break;case 4:return e.t0=t,e.next=7,n.json();case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){c(e)}))}))}},{key:"getAllNewest",value:function(e){var t="".concat(m,"/api/news/getAllNewest");return e&&(t=t.concat("/".concat(e))),new Promise((function(e,c){fetch(t).then(function(){var t=Object(w.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200===n.status){t.next=4;break}c(n),t.next=9;break;case 4:return t.t0=e,t.next=7,n.json();case 7:t.t1=t.sent,(0,t.t0)(t.t1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){c(e)}))}))}}]),e}());c(118);function D(e){return Object(n.jsxs)("div",{className:"parent ".concat(e.size),children:[Object(n.jsx)("div",{className:"child"}),Object(n.jsx)("div",{className:"child"}),Object(n.jsx)("div",{className:"child"}),Object(n.jsx)("div",{className:"child"}),Object(n.jsx)("div",{className:"child"}),Object(n.jsx)("div",{className:"child"}),Object(n.jsx)("div",{className:"child"}),Object(n.jsx)("div",{className:"child"}),Object(n.jsx)("div",{className:"child"})]})}c(119);function T(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),c=t[0],s=t[1],i=Object(a.useState)(null),r=Object(o.a)(i,2),l=r[0],j=r[1],d=Object(a.useState)(null),b=Object(o.a)(d,2),h=b[0],m=b[1],O=Object(u.f)();return Object(a.useEffect)((function(){null===l&&(s(!0),I.getAll().then((function(e){j(e)})).catch((function(e){m("Error ".concat(e.status," ").concat(e.statusText))})).finally((function(){return s(!1)})))}),[l]),Object(n.jsx)("div",{className:"container mt-3",children:Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{className:"title",children:"News list"}),Object(n.jsxs)("button",{className:"button news-list__add-btn",onClick:function(){return O.push("/admin/add-news")},children:["Add article",Object(n.jsx)("i",{className:"fas fa-plus"})]}),c&&Object(n.jsx)(D,{}),h&&!c&&Object(n.jsx)("div",{children:h}),l&&!c&&Object(n.jsx)("div",{className:"news-list",children:l.map((function(e){return Object(n.jsxs)("div",{className:"news-list__row",children:[Object(n.jsx)("div",{children:e.title}),Object(n.jsx)("div",{className:"news-list__table-btn",onClick:function(){return O.push("/admin/edit-news/".concat(e.id))},children:Object(n.jsx)("i",{className:"fas fa-edit"})}),Object(n.jsx)("div",{className:"news-list__table-btn",onClick:function(){return t=e.id,s(!0),void I.delete(t).then((function(){j(null)})).catch((function(e){m("Error ".concat(e.status," ").concat(e.statusText))}));var t},children:Object(n.jsx)("i",{className:"fas fa-trash"})}),Object(n.jsx)("div",{className:"news-list__table-btn",onClick:function(){return t=e.id,s(!0),void I.publish(t).catch((function(e){m("Error ".concat(e.status," ").concat(e.statusText))})).finally((function(){return s(!1)}));var t},children:Object(n.jsx)("i",{className:"far fa-newspaper"})})]},e.id)}))})]})})})}var E=c(49),A=c(31),_=c(105),P=c(51),J=c.n(P);c(216),c(217);function F(e){var t,c=Object(a.useContext)(b).storeData,s=Object(u.f)(),i=Object(a.useState)(null!==(t=e.formData)&&void 0!==t?t:{miniatureContent:"",miniatureColor:"",categoryId:c.dictionaryData.news_category[0].id,miniatureSize:"",miniatureSubtitle:"",miniatureTitle:"",subtitle:"",title:""}),r=Object(o.a)(i,2),j=r[0],d=r[1],h=Object(a.useState)(e.formData&&e.formData.content?A.EditorState.createWithContent(Object(A.convertFromRaw)(JSON.parse(e.formData.content))):A.EditorState.createEmpty()),m=Object(o.a)(h,2),O=m[0],x=m[1],f=Object(a.useState)(e.formData&&e.formData.content?JSON.parse(e.formData.content):null),p=Object(o.a)(f,2),v=p[0],N=p[1];function y(e,t){d(Object(l.a)(Object(l.a)({},j),{},Object(E.a)({},t,e)))}function k(){return(k=Object(w.a)(g.a.mark((function t(){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object.entries(j).reduce((function(e,t){var c=Object(o.a)(t,2),n=c[0],a=c[1];return""!==a&&(e[n]=a),e}),{}),t.next=3,JSON.stringify(Object(A.convertToRaw)(O.getCurrentContent()));case 3:c.content=t.sent,c.categoryId=parseInt(c.categoryId),e.request(c).then((function(){s.push("/admin/news-list")})).catch((function(e){}));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.jsxs)("div",{className:"container mt-3 px-3",children:[Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{className:"label",children:"title"}),Object(n.jsx)("div",{className:"control",children:Object(n.jsx)("input",{className:"input",type:"text",placeholder:"Text input",value:j.title,onChange:function(e){return y(e.target.value,"title")},required:!0})})]}),Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{className:"label",children:"subtitle"}),Object(n.jsx)("div",{className:"control",children:Object(n.jsx)("input",{className:"input",type:"text",placeholder:"Subtitle",value:j.subtitle,onChange:function(e){return y(e.target.value,"subtitle")}})})]}),Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{className:"label",children:"miniature title"}),Object(n.jsx)("div",{className:"control",children:Object(n.jsx)("input",{className:"input",type:"text",placeholder:"Text input",value:j.miniatureTitle,onChange:function(e){return y(e.target.value,"miniatureTitle")}})})]}),Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{className:"label",children:"miniature subtitle"}),Object(n.jsx)("div",{className:"control",children:Object(n.jsx)("input",{className:"input",type:"text",placeholder:"Text input",value:j.miniatureSubtitle,onChange:function(e){return y(e.target.value,"miniatureSubtitle")}})})]}),Object(n.jsxs)("div",{className:"field is-grouped is-justify-content-space-between",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"label mr-2 mb-0",children:"miniature color"}),Object(n.jsx)("div",{className:"control",children:Object(n.jsx)("div",{className:"select",children:Object(n.jsxs)("select",{className:"is-primary",value:j.miniatureColor,onChange:function(e){return y(e.target.value,"miniatureColor")},children:[Object(n.jsx)("option",{children:"None"}),Object(n.jsx)("option",{className:"has-text-primary",value:"is-primary",children:"Primary"}),Object(n.jsx)("option",{className:"has-text-link",value:"is-link",children:"Link"}),Object(n.jsx)("option",{className:"has-text-info",value:"is-info",children:"Info"}),Object(n.jsx)("option",{className:"has-text-success",value:"is-success",children:"Success"}),Object(n.jsx)("option",{className:"has-text-warning",value:"is-warning",children:"warning"}),Object(n.jsx)("option",{className:"has-text-danger",value:"is-danger",children:"danger"})]})})})]}),Object(n.jsxs)("div",{className:"pl-6",children:[Object(n.jsx)("label",{className:"label mr-2 mb-0",children:"miniature size"}),Object(n.jsx)("div",{className:"control",children:Object(n.jsx)("div",{className:"select",children:Object(n.jsxs)("select",{className:"is-primary",value:j.miniatureSize,onChange:function(e){return y(e.target.value,"miniatureSize")},children:[Object(n.jsx)("option",{value:null}),Object(n.jsx)("option",{children:"1"}),Object(n.jsx)("option",{children:"2"}),Object(n.jsx)("option",{children:"3"}),Object(n.jsx)("option",{children:"4"}),Object(n.jsx)("option",{children:"5"}),Object(n.jsx)("option",{children:"6"}),Object(n.jsx)("option",{children:"7"}),Object(n.jsx)("option",{children:"8"})]})})})]}),Object(n.jsxs)("div",{className:"pl-6",children:[Object(n.jsx)("label",{className:"label mr-2 mb-0",children:"category"}),Object(n.jsx)("div",{className:"control",children:Object(n.jsx)("div",{className:"select",children:Object(n.jsx)("select",{className:"is-primary",value:j.categoryId,onChange:function(e){return y(e.target.value,"categoryId")},children:c.dictionaryData.news_category.map((function(e){return Object(n.jsx)("option",{value:e.id,children:e.name},e.id)}))})})})]})]}),Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{className:"label",children:"miniature content"}),Object(n.jsx)("div",{className:"control",children:Object(n.jsx)("textarea",{className:"textarea",name:"miniatureContent",placeholder:"Textarea",value:j.miniatureContent,maxLength:512,onChange:function(e){return y(e.target.value,"miniatureContent")}})})]}),Object(n.jsx)("div",{className:"field",children:Object(n.jsx)(_.Editor,{editorState:O,onEditorStateChange:function(e){x(e),N(Object(A.convertToRaw)(e.getCurrentContent()))},wrapperClassName:"wrapper-class",editorClassName:"editor-class",toolbarClassName:"toolbar-class"})}),null!==v&&Object(n.jsx)("div",{className:"field",children:Object(n.jsx)("div",{className:"content",dangerouslySetInnerHTML:{__html:J()(v)}})}),Object(n.jsxs)("div",{className:"field is-grouped",children:[Object(n.jsx)("div",{className:"control",children:Object(n.jsx)("button",{className:"button is-link",onClick:function(){return k.apply(this,arguments)},children:"Submit"})}),Object(n.jsx)("div",{className:"control",children:Object(n.jsx)("button",{className:"button is-link is-light",onClick:function(){return s.push("/admin/news-list")},children:"Cancel"})})]})]})}function L(){var e=Object(u.g)().id,t=Object(a.useState)(!0),c=Object(o.a)(t,2),s=c[0],i=c[1],r=Object(a.useState)(null),l=Object(o.a)(r,2),j=l[0],d=l[1],b=Object(a.useState)(null),h=Object(o.a)(b,2),m=h[0],O=h[1];return Object(a.useEffect)((function(){i(!0),I.getByIdForEdit(e).then((function(e){d(e)})).catch((function(e){O("Error ".concat(e.status," ").concat(e.statusText))})).finally((function(){return i(!1)}))}),[e]),Object(n.jsxs)("div",{className:"container mt-3 px-3",children:[s&&Object(n.jsx)(D,{}),m&&Object(n.jsx)("div",{children:m}),j&&Object(n.jsx)(F,{request:I.update,formData:j})]})}function B(){return Object(n.jsx)("div",{className:"container mt-3 px-3",children:Object(n.jsx)(F,{request:I.create})})}var z=c(106);c(218);function q(e){var t=e.news,c=Object(u.f)();return Object(n.jsx)("div",{className:"tile is-parent ".concat(t.miniatureIsVertical?"is-vertical":""),onClick:function(){c.push("/news/".concat(t.newsId))},children:Object(n.jsxs)("article",{className:"tile is-child box ".concat(t.miniatureColor?"notification ".concat(t.miniatureColor):""),children:[Object(n.jsx)("p",{className:"title",children:t.miniatureTitle}),Object(n.jsx)("p",{className:"subtitle",children:t.miniatureSubtitle}),t.img&&Object(n.jsx)("figure",{className:"image is-4by3",children:Object(n.jsx)("img",{src:t.img,alt:t.miniatureTitle})}),t.miniatureContent&&Object(n.jsx)("div",{className:"content",children:t.miniatureContent})]})})}function M(){var e=Object(u.g)().categoryId,t=Object(a.useState)(!0),c=Object(o.a)(t,2),s=c[0],i=c[1],r=Object(a.useState)(null),l=Object(o.a)(r,2),j=l[0],d=l[1],b=Object(a.useState)(null),h=Object(o.a)(b,2),m=h[0],O=h[1];Object(a.useEffect)((function(){I.getAllNewest(e).then((function(e){d(e)})).catch((function(e){O("Error ".concat(e.status," ").concat(e.statusText))})).finally((function(){return i(!1)}))}),[e]);var x=Object(a.useMemo)((function(){return j?j.reduce((function(e,t,c){return c%3===0?e[e.length]=[t]:e[e.length-1]=[].concat(Object(z.a)(e[e.length-1]),[t]),e}),[]).map((function(e){var t=e.reduce((function(e,t){var c;return e.concat(" ".concat(null!==(c=t.miniatureSize)&&void 0!==c?c:3,"fr"))}),"");return Object(n.jsx)("div",{style:{gridTemplateColumns:"".concat(t),display:"grid"},children:e.map((function(e){return Object(n.jsx)(q,{news:e},"".concat(e.newsId,"-").concat(e.miniatureTitle))}))},"group-".concat(e[0].newsId))})):Object(n.jsx)("div",{children:"Nothing to show"})}),[j]);return Object(n.jsxs)("div",{className:"container mt-3",children:[s&&Object(n.jsx)(D,{}),m&&Object(n.jsx)("div",{children:m}),j&&x]})}var R=new(function(){function e(){Object(y.a)(this,e)}return Object(k.a)(e,[{key:"getAll",value:function(e){return new Promise((function(t,c){fetch("".concat(m,"/api/comment/getAllForNews/").concat(e)).then(function(){var e=Object(w.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===n.status){e.next=4;break}c(n),e.next=9;break;case 4:return e.t0=t,e.next=7,n.json();case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){c(e)}))}))}},{key:"create",value:function(e){return new Promise((function(t,c){fetch("".concat(m,"/api/comment/create/").concat(e.newsId),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){e.status,t(e.text())})).catch((function(e){c(e)}))}))}}]),e}());function H(e){var t=e.newsId,c=Object(a.useState)(!0),s=Object(o.a)(c,2),i=s[0],r=s[1],l=Object(a.useState)(null),j=Object(o.a)(l,2),u=j[0],d=j[1],b=Object(a.useState)(null),h=Object(o.a)(b,2),m=h[0],O=h[1];Object(a.useEffect)((function(){null===u&&R.getAll(t).then((function(e){d(e)})).catch((function(e){O("Error ".concat(e.status," ").concat(e.statusText))})).finally((function(){return r(!1)}))}),[t,u]);var x=Object(a.useRef)();return Object(n.jsxs)("div",{className:"container mt-3",children:[i&&Object(n.jsx)(D,{}),m&&Object(n.jsx)("div",{children:m}),u&&Object(n.jsxs)("section",{className:"is-large",children:[u.map((function(e){return Object(n.jsxs)("article",{className:"media",children:[Object(n.jsx)("figure",{className:"media-left",children:Object(n.jsx)("p",{className:"image is-64x64",children:Object(n.jsx)("img",{src:"https://via.placeholder.com/128x128",alt:"author"})})}),Object(n.jsx)("div",{className:"media-content",children:Object(n.jsx)("div",{className:"content",children:Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:e.author}),Object(n.jsx)("br",{}),e.content,Object(n.jsx)("br",{})]})})})]},e.id)})),Object(n.jsxs)("article",{className:"media",children:[Object(n.jsx)("figure",{className:"media-left",children:Object(n.jsx)("p",{className:"image is-64x64",children:Object(n.jsx)("img",{src:"https://via.placeholder.com//128x128",alt:"user"})})}),Object(n.jsxs)("div",{className:"media-content",children:[Object(n.jsx)("div",{className:"field",children:Object(n.jsx)("p",{className:"control",children:Object(n.jsx)("textarea",{className:"textarea",placeholder:"Add a comment...",ref:x})})}),Object(n.jsx)("div",{className:"field",children:Object(n.jsx)("p",{className:"control",children:Object(n.jsx)("button",{className:"button",onClick:function(){""!==x.current.value&&R.create({content:x.current.value,newsId:parseInt(t)}).then((function(){r(!0),d(null)})).catch((function(e){O("Error ".concat(e.status," ").concat(e.statusText))})).finally((function(){return r(!1)}))},children:"Post comment"})})})]})]})]})]})}function W(){var e=Object(u.g)().id,t=Object(a.useState)(!0),c=Object(o.a)(t,2),s=c[0],i=c[1],r=Object(a.useState)(null),l=Object(o.a)(r,2),j=l[0],d=l[1],b=Object(a.useState)(null),h=Object(o.a)(b,2),m=h[0],O=h[1],x=Object(a.useState)(),f=Object(o.a)(x,2),p=f[0],v=f[1];return Object(a.useEffect)((function(){null===j&&I.getById(e).then((function(e){if(d(e),e.content){var t=J()(JSON.parse(e.content));v(t)}})).catch((function(e){O("Error ".concat(e.status," ").concat(e.statusText))})).finally((function(){return i(!1)}))}),[e,j]),Object(n.jsxs)("div",{className:"container mt-3",children:[s&&Object(n.jsx)(D,{}),m&&Object(n.jsx)("div",{children:m}),j&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("section",{className:"is-large",children:[Object(n.jsx)("h4",{className:"title",children:j.title}),Object(n.jsx)("h5",{className:"subtitle",children:j.subtitle}),Object(n.jsx)("div",{className:"content",children:Object(n.jsxs)("p",{children:["Author: ",j.authorName]})}),Object(n.jsxs)("div",{className:"columns is-multiline is-mobile",children:[p&&Object(n.jsx)("div",{className:"column",dangerouslySetInnerHTML:{__html:p}}),j.img&&Object(n.jsx)("div",{className:"column is-one-quarter",children:Object(n.jsx)("figure",{className:"image is-128x128",children:Object(n.jsx)("img",{src:j.img,alt:j.title})})})]})]}),Object(n.jsx)(H,{newsId:e})]})]})}var V=new(function(){function e(){Object(y.a)(this,e)}return Object(k.a)(e,[{key:"getAll",value:function(){return new Promise((function(e,t){fetch("".concat(m,"/api/dictionary/getAll")).then(function(){var c=Object(w.a)(g.a.mark((function c(n){return g.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(200===n.status){c.next=4;break}t(n),c.next=9;break;case 4:return c.t0=e,c.next=7,n.json();case 7:c.t1=c.sent,(0,c.t0)(c.t1);case 9:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()).catch((function(e){t(e)}))}))}}]),e}());function G(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),c=t[0],s=t[1],i=Object(a.useState)({userData:null,dictionaryData:null}),r=Object(o.a)(i,2),d=r[0],m=r[1];return Object(a.useEffect)((function(){!0===c&&V.getAll().then((function(e){m((function(t){return Object(l.a)(Object(l.a)({},t),{},{dictionaryData:e.reduce((function(e,t){return e[t.type]?e[t.type].push(t):e[t.type]=[t],e}),{})})}))})).finally((function(){return s(!1)}))}),[c]),Object(n.jsx)(b.Provider,{value:{storeData:d,setStoreData:m},children:Object(n.jsxs)(j.a,{children:[Object(n.jsx)(x,{}),Object(n.jsxs)(u.c,{children:[Object(n.jsx)(u.a,{path:"/",exact:!0,children:Object(n.jsx)(f,{})}),Object(n.jsx)(u.a,{path:"/news-list/:categoryId?",children:Object(n.jsx)(M,{})}),Object(n.jsx)(u.a,{path:"/news/:id",children:Object(n.jsx)(W,{})}),d.userData&&d.userData.roles.includes(h)?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(u.a,{path:"/admin/dashboard",children:Object(n.jsx)(v,{children:Object(n.jsx)(p,{})})}),Object(n.jsx)(u.a,{path:"/admin/news-list",children:Object(n.jsx)(v,{children:Object(n.jsx)(T,{})})}),Object(n.jsx)(u.a,{path:"/admin/add-news",children:Object(n.jsx)(v,{children:Object(n.jsx)(B,{})})}),Object(n.jsx)(u.a,{path:"/admin/edit-news/:id",children:Object(n.jsx)(v,{children:Object(n.jsx)(L,{})})})]}):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(u.a,{path:"/log-in",children:Object(n.jsx)(C,{})})})]})]})})}r.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(G,{})}),document.getElementById("root"))}},[[219,1,2]]]);
//# sourceMappingURL=main.bffec782.chunk.js.map